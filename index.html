<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAI Studio - AI Build Engine</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <script src="neural_engine.js"></script>
    <script src="server.js"></script>
    <style>
        :root { --bg: #05070a; --panel: #11141d; --accent: #00d2ff; --text: #f0f6fc; --success: #238636; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); overflow: hidden; }
        
        /* Layout */
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        .main-view { display: flex; flex: 1; overflow: hidden; }

        /* Menu Sidebar */
        .menu-bar { width: 70px; background: var(--panel); border-right: 1px solid #30363d; display: flex; flex-direction: column; align-items: center; padding: 20px 0; gap: 30px; }
        .menu-btn { cursor: pointer; color: #8b949e; transition: 0.3s; }
        .menu-btn:hover { color: var(--accent); transform: scale(1.1); }

        /* Full Screen Pages */
        .page { display: none; flex: 1; height: 100%; position: relative; }
        .active-page { display: flex; flex-direction: column; }

        /* Chat Section */
        .chat-area { flex: 1; padding: 20px; overflow-y: auto; padding-bottom: 120px; }
        .msg { margin-bottom: 15px; padding: 15px; border-radius: 12px; max-width: 80%; line-height: 1.5; }
        .user-msg { align-self: flex-end; background: var(--accent); color: black; margin-left: auto; }
        .ai-msg { background: #21262d; border-left: 4px solid var(--accent); }

        /* Mega Input Box */
        .input-wrapper { position: fixed; bottom: 70px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 900px; background: #1c2128; border-radius: 20px; padding: 15px; border: 1px solid #444; }
        .input-row { display: flex; align-items: center; gap: 15px; }
        textarea { flex: 1; background: transparent; border: none; color: white; outline: none; font-size: 16px; resize: none; }
        
        /* Plus Menu Tooltip */
        .plus-menu { display: none; position: absolute; bottom: 70px; left: 20px; background: #2d333b; border-radius: 10px; padding: 10px; flex-direction: column; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .plus-menu label, .plus-menu i { cursor: pointer; display: flex; align-items: center; gap: 10px; font-size: 14px; color: #ccc; }

        /* Preview Section */
        #preview-page { background: white; color: black; padding: 0; }
        .deployment-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; text-align: center; }

        /* Footer Navigation */
        footer { height: 60px; background: var(--panel); border-top: 1px solid #30363d; display: flex; justify-content: space-around; align-items: center; }
        .nav-link { display: flex; flex-direction: column; align-items: center; font-size: 12px; cursor: pointer; color: #8b949e; }
        .nav-link.active { color: var(--accent); }

        /* Subscription & Payment */
        .pay-card { background: #1c2128; border: 1px solid var(--accent); padding: 20px; border-radius: 15px; margin-top: 10px; }
        .pay-btn { background: #ff9900; color: black; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="main-view">
        <aside class="menu-bar">
            <div class="menu-btn" title="Menu"><i data-lucide="menu"></i></div>
            <div class="menu-btn" title="Files"><i data-lucide="file-code"></i></div>
            <div class="menu-btn" title="Database"><i data-lucide="database"></i></div>
        </aside>

        <section id="chat-page" class="page active-page">
            <div class="chat-area" id="chat-box">
                <div class="msg ai-msg">
                    <b>HAI Studio में आपका स्वागत है!</b><br>
                    यहाँ कोडिंग और चैट बिल्कुल मुफ्त है। वेबसाइट, ऐप और सॉफ्टवेयर पब्लिश करने के लिए सब्सक्रिप्शन लें।
                </div>
            </div>

            <div class="input-wrapper">
                <div class="plus-menu" id="plus-menu">
                    <label><i data-lucide="image"></i> Gallery <input type="file" hidden onchange="upload('Gallery')"></label>
                    <label><i data-lucide="camera"></i> Camera <input type="file" capture="camera" hidden onchange="upload('Camera')"></label>
                    <label><i data-lucide="video"></i> Video <input type="file" accept="video/*" hidden onchange="upload('Video')"></label>
                    <label><i data-lucide="folder-up"></i> Files <input type="file" hidden onchange="upload('Files')"></label>
                </div>
                <div class="input-row">
                    <i data-lucide="plus-circle" class="menu-btn" onclick="togglePlus()"></i>
                    <textarea id="user-input" placeholder="प्रोजेक्ट का नाम या निर्देश दें..." rows="1"></textarea>
                    <i data-lucide="mic" class="menu-btn" id="mic-btn" onclick="startVoice()"></i>
                    <i data-lucide="arrow-right-circle" class="menu-btn" style="color:var(--accent)" onclick="handleChat()"></i>
                </div>
            </div>
        </section>

        <section id="preview-page" class="page">
            <div id="deploy-screen" class="deployment-overlay" style="display:none;">
                <i data-lucide="loader-2" class="spin" size="48"></i>
                <h2>Publishing via HAI Studio...</h2>
                <p>Domain: my-awesome-app.hai.ai<br>Hosting: HAI Global Edge<br>Status: Syncing to Play Store & iOS...</p>
                <button class="pay-btn" style="width:auto;" onclick="startPayment()">Activate Subscription to Complete</button>
            </div>
            <iframe id="live-frame" style="width:100%; height:100%; border:none;"></iframe>
        </section>
    </div>

    <footer>
        <div class="nav-link active" onclick="showPage('chat-page')">
            <i data-lucide="message-square"></i>
            <span>Chat</span>
        </div>
        <div class="nav-link" onclick="showPage('preview-page')">
            <i data-lucide="eye"></i>
            <span>Preview</span>
        </div>
    </footer>
</div>

<script>
    lucide.createIcons();

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.getElementById(id).classList.add('active-page');
        event.currentTarget.classList.add('active');
        
        if(id === 'preview-page') {
            document.getElementById('deploy-screen').style.display = 'flex';
        }
    }

    function togglePlus() {
        const m = document.getElementById('plus-menu');
        m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
    }

    // Voice & Chat Logic
    function startVoice() {
        const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        rec.lang = 'hi-IN';
        document.getElementById('mic-btn').style.color = 'red';
        rec.onresult = (e) => {
            document.getElementById('user-input').value = e.results[0][0].transcript;
            handleChat();
        };
        rec.start();
    }

    function handleChat() {
        const txt = document.getElementById('user-input').value;
        if(!txt) return;
        const box = document.getElementById('chat-box');
        box.innerHTML += `<div class="msg user-msg">${txt}</div>`;
        
        setTimeout(() => {
            box.innerHTML += `<div class="msg ai-msg">निश्चित ही! मैं <b>index.html</b> और <b>server.js</b> को अपडेट कर रहा हूँ। पब्लिश करने के लिए Preview टैब पर जाएँ।</div>`;
            box.scrollTop = box.scrollHeight;
        }, 1000);
        document.getElementById('user-input').value = "";
    }

    // Payment Integration
    function startPayment() {
        const upiId = "harigovindsingh91-2@okhdfcbank";
        const amount = "999"; // Example Subscription
        const brand = "HAI Studio";
        const url = `upi://pay?pa=${upiId}&pn=${brand}&am=${amount}&cu=INR`;
        
        // This will trigger GPay, PhonePe etc on Mobile
        window.location.href = url;
    }

    function upload(type) {
        alert(`HAI Studio: ${type} अपलोड सफल। प्रोसेसिंग शुरू...`);
        togglePlus();
    }
</script>

</body>
</html>

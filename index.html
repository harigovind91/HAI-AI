<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>HAI Global Studio | Official</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #22c55e; --bg: #030508; }
        body { background-color: var(--bg); color: white; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.08); }
        .preview-pane { background: #fff; border-radius: 16px; width: 100%; height: 100%; border: none; }
        .chat-area { transition: height 0.4s; height: 65px; }
        .expanded { height: 400px !important; }
    </style>
</head>
<body>
    <header class="p-4 flex justify-between items-center glass z-50">
        <div class="flex items-center gap-3">
            <h1 class="text-xl font-bold">HAI GLOBAL <span class="text-green-500">STUDIO</span></h1>
        </div>
        <div class="flex gap-6">
            <a href="user_dashboard.html" class="text-sm font-bold text-gray-400 hover:text-white mt-2">DASHBOARD</a>
            <button onclick="document.getElementById('vac').classList.toggle('hidden')" class="text-sm font-bold text-gray-400 hover:text-white">VACANCY</button>
            <button onclick="alert('UPI: harigovindsingh91-2@okhdfcbank')" class="bg-white text-black px-5 py-2 rounded-full font-bold text-sm">Join Pro</button>
        </div>
    </header>

    <main class="flex-1 p-4 relative">
        <iframe id="livePreview" class="preview-pane hidden"></iframe>
        <div id="placeholder" class="h-full border-2 border-dashed border-gray-800 rounded-2xl flex items-center justify-center text-gray-500">प्रोजेक्ट यहाँ दिखेगा</div>
        
        <div id="vac" class="hidden absolute inset-0 bg-black/90 flex items-center justify-center p-6">
            <div class="glass p-8 rounded-3xl w-full max-w-md">
                <h2 class="text-xl font-bold mb-4 text-green-500">Junior Scientist Application</h2>
                <input id="vName" type="text" placeholder="नाम" class="w-full bg-gray-900 p-3 rounded mb-3 outline-none">
                <textarea id="vSkill" placeholder="आपकी विशेषता" class="w-full bg-gray-900 p-3 rounded mb-3 h-20 outline-none"></textarea>
                <button onclick="alert('Applied!'); document.getElementById('vac').classList.add('hidden')" class="w-full bg-green-600 py-3 rounded-xl font-bold">Submit</button>
            </div>
        </div>
    </main>

    <section class="p-4">
        <div id="chatBox" class="glass rounded-3xl p-3 flex flex-col chat-area overflow-hidden">
            <div class="flex gap-3">
                <button onclick="this.parentElement.parentElement.classList.toggle('expanded')"><i class="fas fa-chevron-up text-gray-500"></i></button>
                <input type="text" id="cmd" class="flex-1 bg-transparent outline-none text-sm" placeholder="HAI, एक नई वेबसाइट बनाओ...">
                <button onclick="runApp()" class="w-10 h-10 bg-green-500 rounded-full text-black"><i class="fas fa-paper-plane"></i></button>
            </div>
            <div id="logs" class="mt-4 text-xs text-gray-500 overflow-y-auto"></div>
        </div>
        <nav class="flex justify-around py-4">
            <button onclick="saveProj()" class="text-gray-400 text-[10px] font-bold uppercase"><i class="fas fa-cloud-upload-alt block text-lg"></i>Save to Cloud</button>
        </nav>
    </section>

    <script>
        async function runApp() {
            const input = document.getElementById('cmd').value;
            document.getElementById('placeholder').classList.add('hidden');
            const preview = document.getElementById('livePreview');
            preview.classList.remove('hidden');
            preview.srcdoc = `<body style="background:#111; color:white; font-family:sans-serif; text-align:center; padding-top:100px;"><h1>${input}</h1><p>Created by HAI Studio</p></body>`;
            document.getElementById('logs').innerHTML += `<div>● Project Generated: ${input}</div>`;
        }

        async function saveProj() {
            const name = prompt("Project Name?");
            const code = document.getElementById('livePreview').srcdoc;
            await fetch('http://localhost:8000/api/save-project', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({user_id: 1, project_name: name, code: code})
            });
            alert("Saved to Dashboard!");
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <title>HAI - All-in-One AI Studio</title>
    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0a0c10; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body class="bg-[#05070a] text-white flex h-screen font-sans overflow-hidden">

    <aside class="w-80 border-r border-gray-800 p-6 flex flex-col overflow-y-auto bg-[#0a0c10] custom-scrollbar">
        <div class="text-4xl font-black text-blue-500 mb-8 italic tracking-tighter">HAI PRO</div>

        <button id="installBtn" style="display:none;" class="bg-green-600 p-3 rounded-xl mb-6 font-bold text-xs shadow-lg">ğŸ“² INSTALL HAI APP</button>

        <nav class="space-y-1 text-sm flex-1">
            <p class="text-blue-400 font-bold uppercase text-[10px] mb-2 tracking-widest">Engineering & CAD</p>
            <button onclick="setMode('CAD & Architectural')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ“ Architectural & Home Design</button>
            <button onclick="setMode('Building Construction')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ¢ Building & Civil Eng</button>
            <button onclick="setMode('Automobile Design')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸš— Automobile & Car Parts</button>
            <button onclick="setMode('Machinery Design')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">âš™ï¸ Industrial Machinery</button>
            <button onclick="setMode('Aerospace & Aero')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸš Aero, Helicopter & Drone</button>
            <button onclick="setMode('Road & Highway')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ›£ï¸ Road, Bridge & Highway</button>
            <button onclick="setMode('Electrical & Electronics')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">âš¡ Electronics & PCB Design</button>

            <p class="text-blue-400 font-bold uppercase text-[10px] mt-6 mb-2 tracking-widest">Creative & Studio</p>
            <button onclick="setMode('Fashion & Clothing')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ‘— Clothes & Fashion Design</button>
            <button onclick="setMode('Furniture & Decor')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ›‹ï¸ Furniture & Interior Design</button>
            <button onclick="setMode('Game Development')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ® Game Dev & Asset Design</button>
            <button onclick="setMode('Robotics AI')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ¤– Robotics & Automation</button>
            <button onclick="setMode('Video & Photo Editing')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ¬ Pro Video & Photo Editing</button>

            <p class="text-blue-400 font-bold uppercase text-[10px] mt-6 mb-2 tracking-widest">Digital Tools</p>
            <button onclick="setMode('Software & Coding')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ’» Web, App & Tool Dev</button>
            <button onclick="setMode('File Converter')" class="w-full text-left p-3 hover:bg-blue-900/20 rounded-xl transition">ğŸ“„ PDF, Excel, JPG, PNG Conv</button>
        </nav>

        <div class="mt-6 pt-6 border-t border-gray-800">
            <button onclick="payNow()" class="w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-2xl font-bold shadow-lg transition transform active:scale-95">
                ğŸš€ PUBLISH TO STORES (â‚¹820)
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col bg-black">
        <div id="output" class="flex-1 p-10 overflow-y-auto custom-scrollbar">
            <h2 id="modeTitle" class="text-3xl font-bold text-white mb-2">Select a Service</h2>
            <div id="chatHistory" class="mt-8 space-y-6"></div>
        </div>

        <div class="p-6 border-t border-gray-800 bg-[#0a0c10]/80 backdrop-blur-md">
            <div class="max-w-4xl mx-auto flex gap-4">
                <input id="promptInput" class="flex-1 bg-gray-900 p-4 rounded-2xl outline-none border border-gray-700 focus:border-blue-500 text-white transition-all" placeholder="Describe your masterpiece (e.g., Design a 3BHK home)...">
                <button onclick="generate()" class="bg-blue-600 hover:bg-blue-700 px-10 rounded-2xl font-bold transition-all shadow-lg shadow-blue-600/20">â¡ï¸</button>
            </div>
        </div>
    </main>

    <script>
        let category = "General Engineering";
        function setMode(m) {
            category = m;
            document.getElementById('modeTitle').innerText = m;
        }

        async function generate() {
            const input = document.getElementById('promptInput');
            const history = document.getElementById('chatHistory');
            const p = input.value;
            if(!p) return;

            history.innerHTML += `<div class="flex justify-end"><div class="bg-blue-600/20 p-4 rounded-2xl text-blue-100 max-w-[80%]">User: ${p}</div></div>`;
            input.value = "";

            const res = await fetch('/generate_all', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({category: category, prompt: p})
            });
            const data = await res.json();

            history.innerHTML += `
                <div class="flex justify-start">
                    <div class="bg-gray-800/50 border border-gray-700 p-6 rounded-2xl max-w-[90%] text-gray-200 shadow-xl">
                        <strong class="text-blue-400 block mb-2 font-bold underline decoration-blue-500/30">HAI ${category} Engine:</strong>
                        <div class="whitespace-pre-wrap">${data.result}</div>
                    </div>
                </div>`;

            const out = document.getElementById('output');
            out.scrollTop = out.scrollHeight;
        }

        function payNow() {
            // à¤†à¤ªà¤•à¤¾ à¤“à¤°à¤¿à¤œà¤¿à¤¨à¤² UPI à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤¸à¤¿à¤¸à¥à¤Ÿà¤®
            window.location.href = "upi://pay?pa=harigovindsingh91-2@okhdfcbank&pn=HAI%20Global&am=820&cu=INR";
        }

        // PWA Installation
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'block';
        });
        document.getElementById('installBtn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt = null;
                document.getElementById('installBtn').style.display = 'none';
            }
        });
    </script>
</body>
</html>
